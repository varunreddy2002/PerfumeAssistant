<!-- templates/prompt.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Perfume Recommender</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='prompt_style.css') }}" />
</head>
<body class="prompt-page">
  <button type="button" id="backButton" class="send-button" aria-label="Back">Back</button>

  <div class="container">
    <h2>Welcome, {{ username }}!</h2>
    <form method="post" id="prompt-form">
      <textarea
        name="user_input"
        placeholder="EX: Find a subtle perfume..."
        required
      ></textarea>

      <button type="submit" aria-label="Submit" id="sendButton">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"
          stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="19" x2="12" y2="5"></line>
          <polyline points="5 12 12 5 19 12"></polyline>
        </svg>
      </button>
    </form>
  </div>

 <div class="loading-overlay" id="loadingOverlay" style="display: none;">
  <span class="loading-text">Scentify is brewing your match...</span>
  <div class="perfume-animation bottle-row">
    <div class="bottle">ðŸŒ¸</div>
    <div class="bottle">ðŸŒ¿</div>
    <div class="bottle">ðŸŒ·</div>
    <div class="bottle">ðŸ’§</div>
    <div class="bottle">âœ¨</div>
  </div>
</div>



  <script>
    document.getElementById('backButton').onclick = () => {
      window.location.href = "{{ url_for('login') }}";
    };
    const form = document.getElementById('prompt-form');
    const loadingOverlay = document.getElementById('loadingOverlay');
    form.addEventListener('submit', () => {
      form.querySelector("button[type='submit']").disabled = true;
      loadingOverlay.style.display = 'flex';
      document.getElementById('backButton').style.display = 'none';
    });
  </script>
</body>
</html>
